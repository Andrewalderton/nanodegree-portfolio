var __extends=function(child,parent){function ctor(){this.constructor=child}for(var key in parent)__hasProp.call(parent,key)&&(child[key]=parent[key]);return ctor.prototype=parent.prototype,child.prototype=new ctor,child.__super__=parent.prototype,child},__hasProp={}.hasOwnProperty;$.ajaxPrefilter(function(options,originalOptions,jqXHR){var cacheKey,hasLocalStorage,hourstl,ttl,value;hasLocalStorage=function(){var e,mod;mod="modernizr";try{return localStorage.setItem(mod,mod),localStorage.removeItem(mod),!0}catch(_error){return e=_error,!1}},hasLocalStorage()&&options.localCache&&(hourstl=options.cacheTTL||5,cacheKey=options.cacheKey||options.url.replace(/jQuery.*/,"")+options.type+(options.data||""),options.isCacheValid&&!options.isCacheValid()&&localStorage.removeItem(cacheKey),ttl=localStorage.getItem(cacheKey+"cachettl"),ttl&&ttl<+new Date&&(localStorage.removeItem(cacheKey),localStorage.removeItem(cacheKey+"cachettl"),ttl="expired"),value=localStorage.getItem(cacheKey),value?(0===options.dataType.indexOf("json")&&(value=JSON.parse(value)),options.success(value),jqXHR.abort()):(options.success&&(options.realsuccess=options.success),options.success=function(data){var e,strdata;strdata=data,0===this.dataType.indexOf("json")&&(strdata=JSON.stringify(data));try{localStorage.setItem(cacheKey,strdata)}catch(_error){e=_error,localStorage.removeItem(cacheKey),localStorage.removeItem(cacheKey+"cachettl"),options.cacheError&&options.cacheError(e,cacheKey,strdata)}options.realsuccess&&options.realsuccess(data)},ttl&&"expired"!==ttl||localStorage.setItem(cacheKey+"cachettl",+new Date+36e5*hourstl)))}),function($){return $.fn.reportCard=function(options){var Codeschool,ReportCard,Treehouse,cs,th,toThousands;return toThousands=function(x){return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},ReportCard=function(){function ReportCard(params){this.userName=params.userName,this.site=params.site,this.badgesAmount=params.badgesAmount,this.tooltips=params.tooltips}return ReportCard.prototype.build=function(data){var html,lastBadges,liWidth;lastBadges=data.badges.slice(-options.badgesAmount),liWidth=100/(lastBadges.length+1)+"%",html='<img src="img/treehouse-logo.png" class="th-logo"><h2>I have passed '+data.badge_count+" lessons and scored "+toThousands(data.points_total)+" points at "+data.site+'!</h2>\n<p class="featured-text">Check out some of my latest passed courses at the badges below: </p>\n<ul class="badges">',lastBadges.forEach(function(badge){return html+='<li style="width: '+liWidth+';" title="'+badge.label+'">\n  <a href="'+data.profile_url+'" target="_blank" data-toggle="tooltip" data-placement="top" >\n    <img src="'+badge.icon_url+'" alt="'+badge.label+'"/>\n  </a>\n</li>'}),html+="</ul>",options.$element.html(html),options.tooltips&&options.$element.each(function(i,el){return $(el).find("li").tooltip()})},ReportCard.prototype.transform=function(data){return data},ReportCard.prototype.getData=function(opts){var $this;return $this=this,$.ajax({type:"GET",url:this.url,localCache:!0,cacheTTL:.5,cacheKey:"reportcard"+options.site+options.userName,dataType:opts.dataType,crossDomain:!0,async:!0,beforeSend:function(){options.$element.html('<div class="spinner"></div>')},success:function(data){return $this.build($this.transform(data))}})},ReportCard}(),Treehouse=function(_super){function Treehouse(params){Treehouse.__super__.constructor.call(this,params),this.url="https://teamtreehouse.com/"+this.userName+".json"}return __extends(Treehouse,_super),Treehouse.prototype.getData=function(){return Treehouse.__super__.getData.call(this,{dataType:"json"})},Treehouse.prototype.transform=function(data){return{site:"Treehouse",username:data.profile_name,profile_url:data.profile_url,points:data.points,points_total:data.points.total,badge_count:data.badges.length,badges:data.badges.map(function(badge){return{courses:badge.courses,course_count:badge.courses.length,earned_date:Date.parse(badge.earned_date),icon_url:badge.icon_url,label:badge.name,url:badge.url}})}},Treehouse}(ReportCard),Codeschool=function(_super){function Codeschool(params){Codeschool.__super__.constructor.call(this,params),this.url="https://www.codeschool.com/users/"+this.userName+".json"}return __extends(Codeschool,_super),Codeschool.prototype.getData=function(){return Codeschool.__super__.getData.call(this,{dataType:"jsonp"})},Codeschool.prototype.transform=function(data){return{site:"Code School",username:data.user.username,profile_url:"https://www.codeschool.com/users/"+data.user.username,points:void 0,points_total:data.user.total_score,badge_count:data.badges.length,badges:data.badges.map(function(badge){return{courses:void 0,course_count:void 0,earned_date:void 0,icon_url:badge.badge,label:badge.name,url:badge.course_url}})}},Codeschool}(ReportCard),options.$element=this,options.badgesAmount=options.badgesAmount?options.badgesAmount:5,options.userName||alert("You need to pass in a username"),options.site||alert("You need to pass in a site"),"treehouse"===options.site?(th=new Treehouse(options),th.getData()):"codeschool"===options.site?(cs=new Codeschool(options),cs.getData()):void 0}}(jQuery),function($){$.apiTimeout=setTimeout(function(){this.ajaxError=!0},5e3),this.ajaxError=!1;var CORS_PROXY="https://cors-anywhere.herokuapp.com/",accessToken="hrSTg8_yD6ssxuB36sG3",codewarsAPI=CORS_PROXY+"https://www.codewars.com/api/v1/users/andy6";$.ajax(codewarsAPI,{type:"GET",crossDomain:!0,Authorization:accessToken,async:!0}).done(function(data){if("0"!=data){clearTimeout($.apiTimeout);var challengesCompleted=data.codeChallenges.totalCompleted,rank=data.ranks.overall.name;$(".codewars").html('<a href="https://www.codewars.com/users/andy6"><img src="img/codewars-logo.png" class="cw-logo certificate" alt="codewars logo"></a><h2>So far, I have completed <b>'+challengesCompleted+'</b> challenges on Codewars!</h2><p class="featured-text">My current rank is: '+rank+'!</p><img src="https://www.codewars.com/users/andy6/badges/micro" class="cw-badge certificate" alt="badge">')}else $(".codewars").html("<p>Codewars data not currently available</p>"),clearTimeout($.apiTimeout),this.ajaxError=!0}).fail(function(){this.ajaxError=!0,$(".codewars").html('<p class="info-error">Codewars data not currently available</p>')})}(jQuery);